<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Laporan Loading Merak</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background-color: #f0f4f8;
      color: #2d3748;
    }
    .hidden {
      display: none;
    }
  </style>
</head>
<body class="p-4 sm:p-6">
  <div class="max-w-3xl mx-auto space-y-6">
    <h1 class="text-2xl sm:text-3xl font-bold text-center text-gray-800">LAPORAN LOADING MERAK</h1>

    <!-- Dropdown pilih form -->
    <div class="bg-white p-4 rounded-lg shadow-md border">
      <label for="jenis_laporan" class="block text-sm font-medium text-gray-700 mb-2">Pilih Jenis Laporan:</label>
      <select id="jenis_laporan" class="w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 px-3 py-2">
        <option value="">-- Pilih Jenis --</option>
        <option value="form-sebelum">Sebelum Loading</option>
        <option value="form-sesudah">Sesudah Loading</option>
      </select>
    </div>

    <!-- Form Sebelum Loading -->
    <div id="form-sebelum" class="hidden bg-white p-4 sm:p-6 rounded-lg shadow-md border-t-4 border-indigo-500">
      <h2 class="text-lg sm:text-xl font-semibold mb-4 text-indigo-600">Sebelum Loading</h2>
      <form action="/sebelum-loading" method="post" enctype="multipart/form-data" class="space-y-4">
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          <div>
            <label class="block text-sm font-medium">Penanggung Jawab</label>
            <input type="text" name="penanggung_jawab" required class="mt-1 w-full rounded-md border-gray-300 shadow-sm px-3 py-2">
          </div>
          <div>
            <label class="block text-sm font-medium">Tanggal</label>
            <input type="date" name="tanggal" readonly required class="tanggal mt-1 w-full bg-gray-100 rounded-md border-gray-300 shadow-sm px-3 py-2">
          </div>
          <div>
            <label class="block text-sm font-medium">Nama Driver</label>
            <input type="text" name="nama_driver" required class="mt-1 w-full rounded-md border-gray-300 shadow-sm px-3 py-2">
          </div>
          <div>
            <label class="block text-sm font-medium">Jam Mulai</label>
            <input type="time" name="jam_mulai" readonly required class="jam mt-1 w-full bg-gray-100 rounded-md border-gray-300 shadow-sm px-3 py-2">
          </div>
          <div>
            <label class="block text-sm font-medium">Netto SPA</label>
            <input type="number" name="netto_spa" required class="mt-1 w-full rounded-md border-gray-300 shadow-sm px-3 py-2">
          </div>
          <div>
            <label class="block text-sm font-medium">Rotogen Kanan</label>
            <input type="number" name="rotogen_kanan" required class="mt-1 w-full rounded-md border-gray-300 shadow-sm px-3 py-2">
          </div>
          <div>
            <label class="block text-sm font-medium">Rotogen Kiri</label>
            <input type="number" name="rotogen_kiri" required class="mt-1 w-full rounded-md border-gray-300 shadow-sm px-3 py-2">
          </div>
          <div class="sm:col-span-2">
            <label class="block text-sm font-medium">Upload Video Kiri</label>
            <input type="file" name="video_kiri" accept="video/*" required class="mt-1 block w-full text-gray-700">
          </div>
          <div class="sm:col-span-2">
            <label class="block text-sm font-medium">Upload Video Kanan</label>
            <input type="file" name="video_kanan" accept="video/*" required class="mt-1 block w-full text-gray-700">
          </div>
        </div>
        <div class="pt-2">
          <button type="submit" class="w-full sm:w-auto bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-6 rounded-md">Kirim</button>
        </div>
      </form>
    </div>

    <!-- Form Sesudah Loading -->
    <div id="form-sesudah" class="hidden bg-white p-4 sm:p-6 rounded-lg shadow-md border-t-4 border-green-500">
      <h2 class="text-lg sm:text-xl font-semibold mb-4 text-green-600">Sesudah Loading</h2>
      <form action="/sesudah-loading" method="post" enctype="multipart/form-data" class="space-y-4">
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          <div>
            <label class="block text-sm font-medium">Penanggung Jawab</label>
            <input type="text" name="penanggung_jawab" required class="mt-1 w-full rounded-md border-gray-300 shadow-sm px-3 py-2">
          </div>
          <div>
            <label class="block text-sm font-medium">Tanggal</label>
            <input type="date" name="tanggal" readonly required class="tanggal mt-1 w-full bg-gray-100 rounded-md border-gray-300 shadow-sm px-3 py-2">
          </div>
          <div>
            <label class="block text-sm font-medium">Jam Selesai</label>
            <input type="time" name="jam_selesai" readonly required class="jam mt-1 w-full bg-gray-100 rounded-md border-gray-300 shadow-sm px-3 py-2">
          </div>
          <div class="sm:col-span-2">
            <label class="block text-sm font-medium">Upload Video Kiri</label>
            <input type="file" name="video_kiri" accept="video/*" required class="mt-1 block w-full text-gray-700">
          </div>
          <div class="sm:col-span-2">
            <label class="block text-sm font-medium">Upload Video Kanan</label>
            <input type="file" name="video_kanan" accept="video/*" required class="mt-1 block w-full text-gray-700">
          </div>
        </div>
        <div class="pt-2">
          <button type="submit" class="w-full sm:w-auto bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-6 rounded-md">Kirim</button>
        </div>
      </form>
    </div>

  </div>

  <script>
    const dropdown = document.getElementById('jenis_laporan');
    const allForms = document.querySelectorAll('#form-sebelum, #form-sesudah');

    // Tampilkan form sesuai pilihan dropdown
    dropdown.addEventListener('change', () => {
      allForms.forEach(f => f.classList.add('hidden'));
      if (dropdown.value) {
        document.getElementById(dropdown.value).classList.remove('hidden');
      }
    });

    // Auto-isi tanggal & jam sekarang
    function formatTwoDigits(num) {
      return num < 10 ? '0' + num : num;
    }

    function setInitialDateTime() {
      const now = new Date();
      const year = now.getFullYear();
      const month = formatTwoDigits(now.getMonth() + 1);
      const day = formatTwoDigits(now.getDate());
      const hours = formatTwoDigits(now.getHours());
      const minutes = formatTwoDigits(now.getMinutes());

      document.querySelectorAll('.tanggal').forEach(el => el.value = `${year}-${month}-${day}`);
      document.querySelectorAll('.jam').forEach(el => el.value = `${hours}:${minutes}`);
    }

    setInitialDateTime();
  </script>
</body>
</html>
